<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Week 1: Spatial analysis for data sciences</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-graphical_representation.html" rel="next">
<link href="./02-installation.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-a14e345711173c227b21482e2eb4cc70.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-6d7e0e055978adcb0dc3bbe98a6d8351.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-a14e345711173c227b21482e2eb4cc70.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-6b8658ecaa42f34dfb83e89c305171f2.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-87f5ed8b884f981cef75eebe188fc88d.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-6b8658ecaa42f34dfb83e89c305171f2.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="assets/styles.css">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03-spatial_analysis_for_data_science.html">Foundation &amp; Theory</a></li><li class="breadcrumb-item"><a href="./03-spatial_analysis_for_data_science.html">Week 1: Spatial analysis for data sciences</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="https://www.ucl.ac.uk/module-catalogue/modules/GEOG0114" class="sidebar-logo-link">
      <img src="./images/general/ucl_logo1.png" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none">
      <img src="./images/general/ucl_logo1.png" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/UCLPG-MSC-SGDS/GEOG0114" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Module Overview</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-module_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-reading_list.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reading List for GEOG0114</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installation of R and RStudio</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Foundation &amp; Theory</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-spatial_analysis_for_data_science.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Week 1: Spatial analysis for data sciences</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-graphical_representation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2: Graphical representation of spatial data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-spatial_autocorrelation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3: Spatial autocorrelation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Raster-Based Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-suitability_mapping_AHP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4: Multi-Decision Criteria Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-suitability_mapping_Niche.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5: Ecological Niche Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-geostatistics_kriging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6: Geostatistics using Kriging</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Spatial Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-spatial_lag_error_regressions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 7: Spatial Lag &amp; Error Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-gwr_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 8: Geographically Weighted Regression (GWR)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-icar_bayesian_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 9: Spatial Bayesian Risk Modelling</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Video Archive</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-video_achives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2023-2024/25</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul>
  <li><a href="#learning-outcomes" id="toc-learning-outcomes" class="nav-link" data-scroll-target="#learning-outcomes"><span class="header-section-number">1.1</span> Learning outcomes</a></li>
  <li><a href="#becoming-familiar-with-the-panels-in-rstudio" id="toc-becoming-familiar-with-the-panels-in-rstudio" class="nav-link" data-scroll-target="#becoming-familiar-with-the-panels-in-rstudio"><span class="header-section-number">1.2</span> Becoming familiar with the panels in RStudio</a></li>
  <li><a href="#using-r-console-as-a-calculator" id="toc-using-r-console-as-a-calculator" class="nav-link" data-scroll-target="#using-r-console-as-a-calculator"><span class="header-section-number">1.3</span> Using R Console as a Calculator</a></li>
  <li><a href="#creating-basic-objects-and-assigning-values-to-it" id="toc-creating-basic-objects-and-assigning-values-to-it" class="nav-link" data-scroll-target="#creating-basic-objects-and-assigning-values-to-it"><span class="header-section-number">1.4</span> Creating basic objects and assigning values to it</a></li>
  </ul></li>
  <li><a href="#basics-of-managing-data-in-rstudio" id="toc-basics-of-managing-data-in-rstudio" class="nav-link" data-scroll-target="#basics-of-managing-data-in-rstudio"><span class="header-section-number">2</span> Basics of managing data in RStudio</a>
  <ul>
  <li><a href="#how-do-we-enter-data-into-rstudio" id="toc-how-do-we-enter-data-into-rstudio" class="nav-link" data-scroll-target="#how-do-we-enter-data-into-rstudio"><span class="header-section-number">2.1</span> How do we enter data into RStudio?</a></li>
  <li><a href="#how-do-we-create-a-variable-based-on-other-existing-variables-in-our-data-frame" id="toc-how-do-we-create-a-variable-based-on-other-existing-variables-in-our-data-frame" class="nav-link" data-scroll-target="#how-do-we-create-a-variable-based-on-other-existing-variables-in-our-data-frame"><span class="header-section-number">2.2</span> How do we create a variable based on other existing variables in our data frame?</a></li>
  <li><a href="#how-do-we-set-the-working-directory-in-our-computer-by-connecting-our-folder-to-rstudio-with-the-setwd-function" id="toc-how-do-we-set-the-working-directory-in-our-computer-by-connecting-our-folder-to-rstudio-with-the-setwd-function" class="nav-link" data-scroll-target="#how-do-we-set-the-working-directory-in-our-computer-by-connecting-our-folder-to-rstudio-with-the-setwd-function"><span class="header-section-number">2.3</span> How do we set the working directory in our computer by connecting our folder to RStudio with the <code>setwd()</code> function?</a></li>
  <li><a href="#how-do-we-import-merge-and-export-csv-data-with-rstudio" id="toc-how-do-we-import-merge-and-export-csv-data-with-rstudio" class="nav-link" data-scroll-target="#how-do-we-import-merge-and-export-csv-data-with-rstudio"><span class="header-section-number">2.4</span> How do we import, merge and export CSV data with RStudio?</a>
  <ul class="collapse">
  <li><a href="#importing-data-using-read.csv" id="toc-importing-data-using-read.csv" class="nav-link" data-scroll-target="#importing-data-using-read.csv"><span class="header-section-number">2.4.1</span> Importing data using <code>read.csv()</code></a></li>
  <li><a href="#joining-two-datasets-by-merger-using-the-merge-function" id="toc-joining-two-datasets-by-merger-using-the-merge-function" class="nav-link" data-scroll-target="#joining-two-datasets-by-merger-using-the-merge-function"><span class="header-section-number">2.4.2</span> Joining two datasets by merger using the <code>merge()</code> function</a></li>
  <li><a href="#saving-your-dataset-using-the-write.csv-function" id="toc-saving-your-dataset-using-the-write.csv-function" class="nav-link" data-scroll-target="#saving-your-dataset-using-the-write.csv-function"><span class="header-section-number">2.4.3</span> Saving your dataset using the <code>write.csv()</code> function</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#basic-visualisation-of-spatial-data-in-rstudio" id="toc-basic-visualisation-of-spatial-data-in-rstudio" class="nav-link" data-scroll-target="#basic-visualisation-of-spatial-data-in-rstudio"><span class="header-section-number">3</span> Basic visualisation of spatial data in RStudio</a>
  <ul>
  <li><a href="#installing-packages-into-rstudio" id="toc-installing-packages-into-rstudio" class="nav-link" data-scroll-target="#installing-packages-into-rstudio"><span class="header-section-number">3.1</span> Installing packages into RStudio</a></li>
  <li><a href="#adding-shapefiles-in-rstudio" id="toc-adding-shapefiles-in-rstudio" class="nav-link" data-scroll-target="#adding-shapefiles-in-rstudio"><span class="header-section-number">3.2</span> Adding shapefiles in RStudio</a></li>
  <li><a href="#mapping-with-tmap-functions-in-rstudio" id="toc-mapping-with-tmap-functions-in-rstudio" class="nav-link" data-scroll-target="#mapping-with-tmap-functions-in-rstudio"><span class="header-section-number">3.3</span> Mapping with ‘tmap’ functions in RStudio</a>
  <ul class="collapse">
  <li><a href="#visualising-the-outlines-of-study-area" id="toc-visualising-the-outlines-of-study-area" class="nav-link" data-scroll-target="#visualising-the-outlines-of-study-area"><span class="header-section-number">3.3.1</span> Visualising the outline(s) of study area</a></li>
  <li><a href="#adding-another-layer-on-top-of-study-area" id="toc-adding-another-layer-on-top-of-study-area" class="nav-link" data-scroll-target="#adding-another-layer-on-top-of-study-area"><span class="header-section-number">3.3.2</span> Adding another layer on top of study area</a></li>
  <li><a href="#full-visualising-of-data-in-the-maps" id="toc-full-visualising-of-data-in-the-maps" class="nav-link" data-scroll-target="#full-visualising-of-data-in-the-maps"><span class="header-section-number">3.3.3</span> Full visualising of data in the maps</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">4</span> References</a>
  <ul>
  <li><a href="#recommended-reading-see-reading-list" id="toc-recommended-reading-see-reading-list" class="nav-link" data-scroll-target="#recommended-reading-see-reading-list"><span class="header-section-number">4.1</span> Recommended reading (see reading list)</a></li>
  </ul></li>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources"><span class="header-section-number">5</span> Data Sources</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise"><span class="header-section-number">6</span> Exercise</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/UCLPG-MSC-SGDS/GEOG0114/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03-spatial_analysis_for_data_science.html">Foundation &amp; Theory</a></li><li class="breadcrumb-item"><a href="./03-spatial_analysis_for_data_science.html">Week 1: Spatial analysis for data sciences</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Week 1: Spatial analysis for data sciences</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>The goal for this week’s session is to get you started with using RStudio, and being familiar with its environment. The session aims to introduce you to the basic programming etiquette, as well as building confidence for using RStudio as a GIS tool. At the end of this session, you should be able to perform some basic data managing tasks as well as generate a simple choropleth map in RStudio.</p>
<section id="learning-outcomes" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="learning-outcomes"><span class="header-section-number">1.1</span> Learning outcomes</h3>
<p>The first task includes getting you started with RStudio by installing the needed software(s) (i.e., <strong>RStudio</strong> and <strong>R</strong>) on to your personal laptop, and becoming familiar with its environment and panels. We will begin a soft introduction on the basics of managing data in RStudio. This includes learning how to create various objects in RStudio such as <strong>vector</strong> and <strong>data frame</strong> objects. The crucial part of this session we be to know how to the set working directories as well as import your dataset in RStudio. Finally, we will learn how to perform the basic visualisation of spatial data in RStudio.</p>
<p>Let us begin.</p>
</section>
<section id="becoming-familiar-with-the-panels-in-rstudio" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="becoming-familiar-with-the-panels-in-rstudio"><span class="header-section-number">1.2</span> Becoming familiar with the panels in RStudio</h3>
<p>You should by now have opened RStudio on your laptop. When opening RStudio for the first time, you are greeted with its interface. The window is split into three panels: 1.) R Console, 2.) Environments and 3.) Files, help &amp; Output.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/image2_panels.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Panel 1</strong>: The <strong>Console</strong> lets the user type in R-codes to perform quick commands and basic calculations.</li>
<li><strong>Panel 2</strong>: The <strong>Environments</strong> lets the user see which datasets, spatial objects and other files are currently stored in RStudio’s memory</li>
<li><strong>Panel 3</strong>: Under the <strong>File</strong> tab, it lets the user access other folders stored in the computer to open datasets. Under the <strong>Help</strong> tab, it also allows the user to view the help menu for codes and commands. Finally, under the <strong>Plots</strong> tab, the user can perusal his/her generated plots (e.g., histogram, scatterplot, maps etc.).</li>
</ul>
<p>The above section is the <strong>Menu Bar</strong>. You can access other functions for saving, editing, and opening a new <strong>Script File</strong> for writing codes. Opening a new <strong>Script File</strong> will reveal a fourth panel above the <strong>Console</strong>.</p>
<p>You can open a <strong>Script File</strong> by:</p>
<ol type="1">
<li><p>Clicking on the <strong>File</strong> tab listed inside the <strong>Menu Bar</strong>. A scroll down bar will reveal itself. Here, you can scroll to the section that says <strong>New File</strong>.</p></li>
<li><p>Under <strong>New File</strong>, click on <strong>R Script</strong>. This should open a new Script File titled “<strong>Untitled 1</strong>”.</p></li>
</ol>
<div class="note">
<p><strong>Important Notes:</strong> Throughout the course, and in all practical tutorials, you will be encouraged to use an R Script for collating and saving the codes you have written for carrying out spatial analysis. However, we will start writing codes in a script later when we reach to section 1.3 of this tutorial. For now, let us start with the absolute basics, which is interacting with the R Console and using it as a basic calculator for typing simple code.</p>
</div>
</section>
<section id="using-r-console-as-a-calculator" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="using-r-console-as-a-calculator"><span class="header-section-number">1.3</span> Using R Console as a Calculator</h3>
<p>The R console window (i.e., Panel 1) is the place where RStudio is waiting for you to tell it what to do. It will show the code you have commanded RStudio to execute, and it will also show the results from that command. You can type the commands directly into the window for execution as well.</p>
<p>Let us start by using the console window as a basic calculator for typing in addition (<code>+</code>), subtraction (<code>-</code>), multiplication (<code>*</code>), division (<code>/</code>), exponents (<code>^</code>) and performing other complex sums.</p>
<p>Click inside the R Console window and type <code>19+8</code>, and press enter key button <code>↵</code> to get your answer. Quickly perform the following maths by typing them inside the R Console window:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform addition</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span><span class="sc">+</span><span class="dv">8</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform subtraction</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">20-89</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform multiplication</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span><span class="sc">*</span><span class="dv">20</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform division</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="dv">27</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># To number to a power e.g., 2 raise to the power of 8</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">^</span><span class="dv">8</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform complex sums</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>(<span class="dv">5</span><span class="sc">*</span>(<span class="dv">170</span><span class="fl">-3.405</span>)<span class="sc">/</span><span class="dv">91</span>)<span class="sc">+</span><span class="dv">1002</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Aside from basic arithmetic operations, we can use some basic mathematical functions such as the exponential and logarithms:</p>
<ul>
<li><code>exp()</code> is the exponential function</li>
<li><code>log()</code> is the logarithmic function</li>
</ul>
<p>Do not worry at all about these functions as you will use them later in the weeks to come for transforming variables. Perform the following by typing them inside the R Console window:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use exp() to apply an exponential to a value</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="dv">5</span>) </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># use log() to transforrm a value on to a logarithm scale</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="creating-basic-objects-and-assigning-values-to-it" class="level3" data-number="1.4">
<h3 data-number="1.4" class="anchored" data-anchor-id="creating-basic-objects-and-assigning-values-to-it"><span class="header-section-number">1.4</span> Creating basic objects and assigning values to it</h3>
<p>Now that we are familiar with using the console as a calculator. Let us build from this and learn one of the most important codes in RStudio which is called the <strong>Assignment Operator</strong>.</p>
<p>This arrow symbol <code>&lt;-</code> is called the <strong>Assignment Operator</strong>. It is typed by pressing the less than symbol key <code>&lt;</code> followed by the hyphen symbol key <code>-</code>. It allows the user to assign values to an <strong>Object</strong> in R.</p>
<p><strong>Objects</strong> are defined as stored quantities in RStudio’s environment. These objects can be assigned anything from numeric values to character string values. For instance, say we want to create a numeric object called <code>x</code> and assign it with a value of <code>3</code>. We do this by typing <code>x &lt;- 3</code>. When you enter the object <code>x</code> in the console and press enter <code>↵</code>, it will return the numeric value <code>3</code>.</p>
<p>Another example, suppose we want to create a string object called <code>y</code> and assign it with some text <code>"Hello!"</code>. We do this typing <code>y &lt;- "Hello!"</code>. When you enter <code>y</code> in console, it will return the text value <code>Hello</code>.</p>
<p>Let us create the objects <code>a</code>,<code>b</code>, <code>c</code>, and <code>d</code> and assign them with numeric values. Perform the following by typing them inside the R Console window:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an object called 'a' and assign the value 17 to it</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">17</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the object 'a' in console as a command to return value 17</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an object called 'b' and assign the value 10 to it</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the object 'b' in console as a command to return value 10</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>b</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an object called 'c' and assign the value 9 to it</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the object 'c' in console as a command to return value 9</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>c</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an object called 'd' and assign the value 8 to it</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="dv">8</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the object 'd' in console as a command to return value 8</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Notice how the objects <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> and its value are stored in RStudio’s environment panel. We can perform the following arithmetic operations with these object values:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># type the following and return an answer</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>(a <span class="sc">+</span> b <span class="sc">+</span> c <span class="sc">+</span> d)<span class="sc">/</span><span class="dv">5</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># type the following and return an answer</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>(<span class="dv">5</span><span class="sc">*</span>(a<span class="sc">-</span>c)<span class="sc">/</span>d)<span class="sc">^</span><span class="dv">2</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let us create more objects but this time we will assign character string(s) to them. Please note that when typing a string of characters as data you will need to cover them with quotation marks <code>"..."</code>. For example, say we want to create a string object called <code>y</code> and assign it with some text <code>"Hello!"</code>. We do this by typing <code>y &lt;- "Hello!"</code>.</p>
<p>Try these examples of assigning the following character text to an object:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an object called 'e' and assign the character string "RStudio"</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="st">"RStudio"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the object 'e' in the console as a command to return "RStudio"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>e</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an object called 'f', assign character string "Hello world" </span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"Hello world"</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the object 'f' in the console as a command to return "Hello world"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>f</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an object called 'g' and assign "Blade Runner is amazing"</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="st">"Blade Runner is amazing"</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the object 'g' in the console to return the result</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>g</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We are now familiar with using the console and assigning values (i.e., numeric and string values) to objects. The parts covered here are the initial steps and building blocks for coding and creating datasets in RStudio.</p>
<p>Let us progress to section 1.3. Here is where the serious stuff start. We will learn the basics of managing data and some coding etiquette - this includes creating data frames, importing &amp; exporting spreadsheets, setting up work directories, column manipulations and merging two data frames. Learning these basic tasks are key for managing data in RStudio.</p>
<div class="note">
<p><strong>Point of no return</strong>: From here on out - let us open a script file and type codes there instead of the Console. We are getting serious now, we will never use the Console again.</p>
</div>
</section>
</section>
<section id="basics-of-managing-data-in-rstudio" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="basics-of-managing-data-in-rstudio"><span class="header-section-number">2</span> Basics of managing data in RStudio</h2>
<section id="how-do-we-enter-data-into-rstudio" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="how-do-we-enter-data-into-rstudio"><span class="header-section-number">2.1</span> How do we enter data into RStudio?</h3>
<p>As you have already seen, RStudio is an object-oriented software package and so entering data is slightly different for the usual way of inputting information into a spreadsheet (e.g., Microsoft Excel). Here, you will need to enter the information as a <strong>Vector</strong> object before combining them into a <strong>Data Frame</strong> object.</p>
<p>Consider this crude example of data containing the additional health information for 4 people. It contains the variable (or column) names ‘id’, ‘name’, ‘height’, ‘weight’ and ‘gender’</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>id</strong></th>
<th><strong>name</strong></th>
<th><strong>height</strong></th>
<th><strong>weight</strong></th>
<th><strong>gender</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Kofi</td>
<td>1.65</td>
<td>64.2</td>
<td>M</td>
</tr>
<tr class="even">
<td>2</td>
<td>Harry</td>
<td>1.77</td>
<td>80.3</td>
<td>M</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Huijun</td>
<td>1.70</td>
<td>58.7</td>
<td>F</td>
</tr>
<tr class="even">
<td>4</td>
<td>Fatima</td>
<td>1.68</td>
<td>75.0</td>
<td>F</td>
</tr>
</tbody>
</table>
<p>Now, when entering data to RStudio it is not like Microsoft Excel where we enter data into the cells of a spreadsheet. In RStudio, data is entered as a sequence of elements and listed inside an object called a <strong>vector</strong>. For instance, if we have three age values of 12, 57 and 26 years, and we want to enter this in RStudio, we need to use the combine function <code>c()</code> and combine these three elements into a vector object. Hence, the code will be <code>c(12, 57, 26)</code>. We can assign this data by typing this code as <code>age &lt;- c(12, 57, 26)</code>. Any time you type ‘age’ into RStudio console it will hence return these three values unless you chose to overwrite it with different information.</p>
<p>Let us look at this more closely with the <code>'id'</code> variable in the above data. Each person has an ID number from 1 to 4. We are going to list the numbers 1, 2, 3 and 4 as a sequence of elements into a vector using the combine function <code>c()</code> and then assign it to as a vector object calling it <code>'id'</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create 'id' vector object </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>id <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the vector object 'id' in console to see output</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>id</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, let us enter the information the same way for the remaining columns for ‘name’, ‘height’, ‘weight’ and ‘gender’ like we did for ‘id’:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create 'name' vector object</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Kofi"</span>, <span class="st">"Harry"</span>, <span class="st">"Huijun"</span>, <span class="st">"Fatima"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create 'height' (in meters) vector object</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>height <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.65</span>, <span class="fl">1.77</span>, <span class="fl">1.70</span>, <span class="fl">1.68</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create 'weight' (in kg) vector object</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>weight <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">64.2</span>, <span class="fl">80.3</span>, <span class="fl">58.7</span>, <span class="fl">75.0</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create 'gender' vector object</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now, that we have the vector objects ready. Let us bring them together to create a proper dataset. This new object is called a <code>Data frame</code>. We need to list the vectors inside the <code>data.frame()</code> function.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dataset (data frame)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(id, name, height, weight, gender)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Type the data frame object 'dataset' in console to see output</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>dataset</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also see dataset in a data viewer, type View() to data:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(dataset)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The column ‘id’ is a numeric variable with integers. The second column ‘name’ is a text variable with strings. The third &amp; fourth columns ‘height’ and ‘weight’ are examples of numeric variables with real numbers with continuous measures. The variable ‘gender’ is a text variable with strings – however, this type of variable is classed as a categorical variable as individuals were categorised as either ‘M’ and ‘F’.</p>
</div>
</div>
</section>
<section id="how-do-we-create-a-variable-based-on-other-existing-variables-in-our-data-frame" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="how-do-we-create-a-variable-based-on-other-existing-variables-in-our-data-frame"><span class="header-section-number">2.2</span> How do we create a variable based on other existing variables in our data frame?</h3>
<p>To access a variable by its name within a data frame, you will need to first type the name of the data frame followed by a <code>$</code> (dollar sign), and then typing the variable’s name of interest. For instance, suppose you just want to see the height values in the Console viewer - you just type:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to access height - you need to type 'dataset$height'</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>dataset<span class="sc">$</span>height</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We can use other columns or variables within our data frame to create another variable. This technique is essentially important when cleaning and managing data. From this dataset, it is possible to derive the body mass index <code>bmi</code> from height and weight using the formula:</p>
<br>
<center>
<span class="math inline">\(BMI = weight/height^2\)</span>
</center>
<p><br></p>
<p>To generate <code>bmi</code> into our data frame, we would need to access the <code>height</code> (m) and <code>weight</code> (kg) columns using the <code>$</code> from the data frame its stored to, and apply the above formula as a code to generate the new <code>bmi</code> column:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create 'bmi' in the data frame i.e.,'dataset' and calculate 'bmi'</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># using the $weight and $height</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>dataset<span class="sc">$</span>bmi <span class="ot">&lt;-</span> dataset<span class="sc">$</span>weight<span class="sc">/</span>((dataset<span class="sc">$</span>height)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the data frame ‘dataset’ and you will see the new bmi variable inside</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(dataset)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>You can overwrite the <code>height</code> (m) column to change its units into centimeters by multiplying it to 100; equally, the <code>weight</code> (kg) column can be overwritten and converted from units of kilograms to grams by multiplying it to 1000.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using $height and *100 </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>dataset<span class="sc">$</span>height <span class="ot">&lt;-</span> dataset<span class="sc">$</span>height<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using $weight and *100</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>dataset<span class="sc">$</span>weight <span class="ot">&lt;-</span> dataset<span class="sc">$</span>weight<span class="sc">*</span><span class="dv">1000</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># use View() the data frame ‘dataset’ and you will see the updated variables</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(dataset)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="how-do-we-set-the-working-directory-in-our-computer-by-connecting-our-folder-to-rstudio-with-the-setwd-function" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="how-do-we-set-the-working-directory-in-our-computer-by-connecting-our-folder-to-rstudio-with-the-setwd-function"><span class="header-section-number">2.3</span> How do we set the working directory in our computer by connecting our folder to RStudio with the <code>setwd()</code> function?</h3>
<p><strong>Now, we are getting very serious here!</strong></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before we do anything - make sure to have downloaded the data set for week 1 if you haven’t done so by <a href="https://github.com/UCLPG-MSC-SGDS/GEOG0114/raw/main/Week%201%20-%20Dataset.zip"><strong>clicking here</strong></a>. In your computer, create a new folder on your desktop page and rename the folder to <strong>“GEOG0114”</strong>, and create another folder within <strong>“GEOG0114”</strong> and rename it as <strong>“Week 1”</strong>. Make sure to unzip and transfer <strong>ALL</strong> the downloaded data directly to the <strong>Week 1</strong> folder.</p>
</div>
</div>
<p>Now, this part of the practicals are probably the most important section of this tutorial. It’s usually the <strong>“make”</strong> or <strong>“break”</strong> phase (i.e., you ending up loving RStudio OR you hating it and not ever wanting to pick up R again).</p>
<p>We are going to learn how to set-up a working directory. This basically refers to us connecting the RStudio to the folder containing our dataset. It allows the user to tell RStudio to open data from a folder once it knows the <strong>path location</strong>. The path location specifies the whereabouts of the data file(s) stored within a computer. Setting your directory in RStudio beforehand makes life incredibly easier in terms of finding, importing, exporting and saving data in and out of RStudio.</p>
<p>To illustrate what a path location is – suppose on my desktop (mac/widows) there is a folder called <strong>“GEOG0114”</strong>, and within that folder, exists another folder called <strong>“Week 1”</strong>. Finally, suppose a comma separated value (.csv) data file called <strong>“London_LSOA_FireHazards.csv”</strong> is store in this last folder i.e., <strong>Week 1</strong>. If via RStudio you want to open this CSV data file located in within the <strong>“Week 1”</strong> folder. You will need to first set the path to <strong>“Week 1”</strong> in RStudio using the <code>setwd()</code> function.</p>
<p>Therefore, the path location to this folder on a <strong>Windows</strong> machine would be written as follows, <code>"C:/Users/accountName/Desktop/GEOG0114/Week 1"</code>. You can access this piece of information simply by:</p>
<ol type="1">
<li>Open the <strong>GEOG0114</strong> folder to reveal the <strong>Week 1</strong> folder.</li>
<li>Open the <strong>Week 1</strong> folder in the data files are stored.</li>
<li>Now, click on the bar at the top which shows <code>GEOG0114 &gt; Week 1</code>. This should highlight and show <code>"C:\Users\accountName\Desktop\GEOG0114\Week 1"</code> (see image below):</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/image3_path_window.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Now, copy <code>"C:\Users\accountName\Desktop\GEOG0114\Week 1"</code> and paste the path name into the <code>setwd()</code> function in your R script.</li>
<li>Lastly, change all the back slashes <code>\</code> in the path name to forward slashes <code>/</code> and run the code. It should look like this: <code>setwd("C:/Users/accountName/Desktop/GEOG0114/Week 1")</code>.</li>
</ol>
<p>For Windows, the <code>setwd()</code> is as follows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set work directory in windows</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/accountName/Desktop/GEOG0114/Week 1"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>For <strong>MAC</strong> users, its marginally different. The path location would be written as follows, <code>"/Users/accountName/Desktop/GEOG0114/Week 1"</code>. You can access this piece of information simply by:</p>
<ol type="1">
<li>Right-clicking on the folder “Week 1” (not file) in which the files are stored.</li>
<li>Hold the “Option” <code>⌥</code> key down</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/image4_path_mac.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Click <code>Copy "filename" as Pathname</code></li>
<li>Paste the copied path name into the function <code>setwd()</code> and run the code</li>
</ol>
<p>For Mac, the <code>setwd()</code> is as follows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set work directory in macs</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Users/accountName/Desktop/GEOG0114/Week 1"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>This should set the working directory. Now, let us learn how to import a CSV data into RStudio.</p>
</section>
<section id="how-do-we-import-merge-and-export-csv-data-with-rstudio" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="how-do-we-import-merge-and-export-csv-data-with-rstudio"><span class="header-section-number">2.4</span> How do we import, merge and export CSV data with RStudio?</h3>
<section id="importing-data-using-read.csv" class="level4" data-number="2.4.1">
<h4 data-number="2.4.1" class="anchored" data-anchor-id="importing-data-using-read.csv"><span class="header-section-number">2.4.1</span> Importing data using <code>read.csv()</code></h4>
<p>As you will be working mostly with comma separated value formatted data (i.e., csv) we will therefore learn how to import and export in RStudio. There are two files that we are going to import into RStudio from Week 1’s folder:</p>
<ol type="1">
<li><code>London_LSOA_Deprivation_2019.csv</code> which contains information on seven indicators (as scores) and an IMD ranking for socioeconomic deprivation for 4,836 postcodes across London in 2019.</li>
<li><code>London_LSOA_FireHazards_2019.csv</code> which contains details about the observed and estimated expected number of fire-related accidents to have occurred in residential premises with the overall number of houses in 4,836 postcodes across London in 2019.</li>
</ol>
<p>To import a csv into RStudio, we use the <code>read.csv()</code> function. To demonstrate this, let us import the data for fires into an data frame object and name it as <code>Fire_data</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import data using read.csv() function </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>Fire_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file=</span><span class="st">"London_LSOA_FireHazards_2019.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Just in case…suppose if we did <strong>NOT</strong> set the working directory earlier. We would have to go through the hassle of typing the path location in the <code>read.csv()</code>.</p>
<p>For windows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Fire_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file=</span><span class="st">"C:/Users/accountName/Desktop/GEOG0114/Week 1/London_LSOA_FireHazards_2019.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>For Mac:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Fire_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file=</span><span class="st">"/Users/accountName/Desktop/GEOG0114/Week 1/London_LSOA_FireHazards_2019.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>I do not recommend doing it this way. Just set the work directory with <code>setwd()</code> to make life easier for yourself.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The arguments used in <code>read.csv()</code> function – 1.) ‘<code>file =</code>’ is a mandatory option where you quote the name of the file to be imported; 2.) ‘<code>header = TRUE</code>’ option is set to <code>TRUE</code> which is telling RStudio that the file that is about to be imported has column names on the first row so it should not treat as observations; and 3.) ‘<code>sep = ","</code>’ we are telling RStudio that the format of the dataset is comma separated.</p>
</div>
</div>
<p>We have imported the fire hazards data. Now, let us import the second data for deprivation using the <code>read.csv()</code> function and call it <code>Deprivation_data</code>. The code would look something as follows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import data using read.csv() function </span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>Deprivation_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file=</span><span class="st">"London_LSOA_Deprivation_2019.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show viewer the data sets</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(Deprivation_data)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(Fire_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="joining-two-datasets-by-merger-using-the-merge-function" class="level4" data-number="2.4.2">
<h4 data-number="2.4.2" class="anchored" data-anchor-id="joining-two-datasets-by-merger-using-the-merge-function"><span class="header-section-number">2.4.2</span> Joining two datasets by merger using the <code>merge()</code> function</h4>
<p>You will often find yourself merging two or more data frames together, especially bringing together a spatial object with a non-spatial object. We cannot stress the importance of merging objects in the correct order so that the spatial attributes are preserved.</p>
<p>In this instance, we are just dealing with two ordinary dataset which are non-spatial - i.e., one data set contains information on Fires that occurred in geographic units in London know as Lower Super Output Areas (LSOA), while the other contains its corresponding information for socioeconomic indicators that describe the LSOA. Hence, it is possible to merge the two data frames uniquely using a common key variable like <code>LSOA_code</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/image5_dataviewer.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>This task can be done using the merge function <code>merge()</code>. Consequently, we want the format of the merge code to look something akin to this syntax <code>merge(target_object, selected_object, by=”LSOA”)</code>.</p>
<p>Merging data frames is indeed a very important technique to know especially if you need to bring together event information with no spatial dimension with actual spatial data. Alright, let’s merge the deprivation data on the fire records using the <code>LSOA_code</code> column, and generate a bigger data frame that contains both the fire and socioeconomic information:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the merge() function </span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>Full_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(Fire_data, Deprivation_data, <span class="at">by.x =</span> “LSOA_code”, <span class="at">by.y =</span> “LSOA_code”, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the datasets</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(Full_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The arguments used in <code>merge.csv()</code>:</p>
<ol type="1">
<li><code>Fire_data</code> is the target data frame we want something to be merged on to.</li>
<li><code>Deprivation_data</code> is the selected data frame we are using to merge with the <code>Fire_data</code>.</li>
<li><code>by.x = "LSOA_code"</code> option we are specifying the name of the join column from the target data frame i.e., <code>Fire_data</code>.</li>
<li><code>by.y = "LSOA_code"</code> option we are specifying the name of the join column from the selected data frame i.e., <code>Deprivation_data</code></li>
<li><code>all.x=TRUE</code> option we are telling RStudio to retain all rows that are originally from the target data after merging regardless of whether or not they are present in the selected data frame. So even if a row from the selected data does not find a unique link with any of the rows in target data to match too - it will still preserve the target data frame by not discarding unlinked rows. But it will discard the unmatched rows from the selected data frame.</li>
</ol>
</div>
</div>
</section>
<section id="saving-your-dataset-using-the-write.csv-function" class="level4" data-number="2.4.3">
<h4 data-number="2.4.3" class="anchored" data-anchor-id="saving-your-dataset-using-the-write.csv-function"><span class="header-section-number">2.4.3</span> Saving your dataset using the <code>write.csv()</code> function</h4>
<p>Let us save a version of this as a <code>.csv</code> file as a saved product named <code>“London_Fire_and_Deprivation_2019.csv”</code>. This can be done by using the <code>write.csv()</code> function. It will export the data frame object into a <code>.csv</code> format.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Export ‘Full_data’ object as .csv into 'Week 1' folder</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(Full_data, <span class="at">file =</span> <span class="st">"London_Fire_and_Deprivation_2019.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The arguments used in <code>merge.csv()</code>:</p>
<ol type="1">
<li><code>Full_data</code> is an object we are exporting. It is compulsory to specify the object data frame we want to export</li>
<li><code>file =</code> is a mandatory argument. We must give a name to the file we wish to export it as with <code>.csv</code> extension.</li>
<li><code>row.names =</code> this is an annoying argument! It will automatically index the dataset with unique row numbers by default if we do not specify <code>FALSE</code>! Since the data has its own unique identifiers (i.e., LSOA_code) we specify ‘FALSE’ to not perform this action of indexing</li>
</ol>
</div>
</div>
<p>Again, suppose if you did <strong>NOT</strong> set the work directory to your folder, you will have to type the whole path location to where you want the data to be exported which could be a hassle:</p>
<p>For Windows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(Full_data, <span class="at">file =</span> <span class="st">"C:/Users/accountName/Desktop/GEOG0114/Week 1/London_Fire_and_Deprivation_2019.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>For Mac:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(Full_data, <span class="at">file =</span> <span class="st">"/Users/accountName/Desktop/GEOG0114/Week 1/London_Fire_and_Deprivation_2019.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Again, I do not recommend doing it this way. Just set the work directory with <code>setwd()</code> to make life easier for yourself and to avoid R calling you out for errors.</p>
<p>Now that we have learned a lot of the basic things in RStudio – the stuff shown in <strong>section 1.3</strong> will be used quite a lot in future tutorials. Let us progress to the <strong>section 1.4</strong> where will start using RStudio as a GIS software. Here, we will create our first map to display the spatial distribution of socioeconomic deprivation using the <code>Full_data</code> data frame object.</p>
</section>
</section>
</section>
<section id="basic-visualisation-of-spatial-data-in-rstudio" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="basic-visualisation-of-spatial-data-in-rstudio"><span class="header-section-number">3</span> Basic visualisation of spatial data in RStudio</h2>
<section id="installing-packages-into-rstudio" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="installing-packages-into-rstudio"><span class="header-section-number">3.1</span> Installing packages into RStudio</h3>
<p>So far, we have been using functions and commands that are by default built-in RStudio. As you will become more and more proficient in RStudio, you will come to realise that there are several functions in RStudio that are in fact not built-in by default which will require external installation.</p>
<p>For instance, the <strong><code>sf</code></strong> package which is called <strong>Simply Features</strong> allows the user to load shapefiles (a type of Vector spatial data) into RStudio’s memory. Another important package is called <strong>tmap</strong>, this package gives access to various functions that allows the user to write code and emulate RStudio as a GIS software. These are examples of packages with enables mapping of spatial data. They need to be installed as they not built-in programs in RStudio.</p>
<p>Let us install following packages: <code>tmap</code> and <code>sf</code> using the <code>install.packages()</code> function, and then activate the packages to make them active using the <code>library()</code> function.</p>
<p>First install <code>remotes</code>, <code>tmap</code> and <code>sf</code> packages.:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"sf"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tmap"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Once the installation is complete, you <strong>MUST</strong> activate the packages using the <code>library()</code> function. Type the following to perform this action:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Active the sf and tmap packages</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"sf"</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tmap"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="adding-shapefiles-in-rstudio" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="adding-shapefiles-in-rstudio"><span class="header-section-number">3.2</span> Adding shapefiles in RStudio</h3>
<p>The <code>sf</code> package grants the user access to a function called <code>read_sf()</code> to read-in shapefiles into RStudio. A shapefile typically contains the geometry of the spatial features e.g., points, line segment and boundaries of an areal feature etc. The shapefile has the extension of .shp (and it is <strong>always</strong> accompanied by its other supporting files with extensions <code>.shx</code>, <code>.prj</code>, <code>.dbf</code> and <code>.cpg</code>).</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Following files must <strong>all</strong> be stored in the same folder location with <code>.shp</code> file (i.e., <code>.shx</code>, <code>.prj</code>, <code>.dbf</code> and <code>.cpg</code>). If one is missing - the <code>.shp</code> file will not work!</p>
</div>
</div>
<p>We have two types of shapefiles:</p>
<ol type="1">
<li><code>London_LSOA_Areas.shp</code> which contains the spatial boundaries of all LSOA postcodes in London.</li>
<li><code>London_Borough_Shapefile.shp</code> which contains the spatial boundaries for all 33 Boroughs in London.</li>
</ol>
<p>We can easily load them in RStudio as <strong>Spatial Polygon</strong> objects, type into your script:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add shapefiles for LSOA and Boroughs</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>london_lsoa_shapefile <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"London_LSOA_areas.shp"</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>london_borough_shapefile <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"London_Boroughs_Shapefile.shp"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We interested in visualising the data at an LSOA-level. We would need to merge the non-spatial (aka ordinary) data i.e., Full_data, uniquely in to the Spatial Polygon object we loaded in previously i.e., <code>london_lsoa_shapefile</code>, using the <code>LSOA_code</code> column.</p>
<p>Again, we can use the <code>merge()</code> function to perform this task the same way we carried out the joining of the two ordinary data frames in <strong>section 1.3.4.2</strong>. Consequently, we want the format of the merge code to look something akin to this syntax <code>merge(target_spatial_object, selected_non_spatial_object, by="LSOA")</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the merge() function </span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>Spatial_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(london_lsoa_shapefile, Full_data, <span class="at">by.x =</span> <span class="st">"LSOA_code"</span>, <span class="at">by.y =</span> <span class="st">"LSOA_code"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the datasets</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(Spatial_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="mapping-with-tmap-functions-in-rstudio" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="mapping-with-tmap-functions-in-rstudio"><span class="header-section-number">3.3</span> Mapping with ‘tmap’ functions in RStudio</h3>
<p>The <code>tmap</code> is the best package for creating maps in RStudio – it’s easy to code and user friendly. Let’s finally start some mapping! Here are some basic ‘tmap’ functions to be very familiar with:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 48%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th><strong><code>tmap</code></strong> functions</th>
<th><strong>What it does…</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>tm_shape()</code></td>
<td>This allows the user to add layers to be mapped</td>
</tr>
<tr class="even">
<td><code>tm_polygons()</code></td>
<td>This deal with <strong>vector</strong> type dataset specifically. This allows the user to specify which column in the vector layer to be mapped using the <code>fill =</code> argument. Within the <code>tm_polygon()</code>, it also allows the user to apply the appropriate customisation to the vector layer. Examples of such arguments in 1.) <code>fill_alpha =</code> to modify the transparency; 2.) <code>col_alpha =</code> to modify the transparency of the borders; 3.) <code>col =</code> controls the colour of the line; 4.) <code>fill.scale =</code> controls the appearence and set the colour scheme of the scale that appears inside the legends block. Please note that if your data is continuous, then the appropriate argument to use in the <code>fill.scale =</code> would be either <code>tm_scale_continuous()</code> or <code>tm_scale_interval()</code> for breaking the continuous values into intervals. If they are numerical but discrete (counts) use <code>tm_scale_discrete()</code>. Otherwise, if it is categorical use <code>tm_scale_categorical()</code>; and 4.) <code>fill.legend = tm_legend(...)</code> allows the user to control the presentation of the legend. There are many arguments to experiment with - you can type <code>?tm_polygons()</code> in console to see them. Please note that the <code>tm_polygons()</code> is immediately followed after specifying the <code>tm_shape()</code> function.</td>
</tr>
<tr class="odd">
<td><code>tm_layout()</code></td>
<td>This allows the user to make heavy customisations to the main title, legends and other cosmetics to text sizes etc.</td>
</tr>
<tr class="even">
<td><code>tm_compass()</code></td>
<td>This allows the user to add a compass visual to the map output</td>
</tr>
<tr class="odd">
<td><code>tm_scale_bar()</code></td>
<td>This allows the user to add a scale bar to the map output</td>
</tr>
</tbody>
</table>
<section id="visualising-the-outlines-of-study-area" class="level4" data-number="3.3.1">
<h4 data-number="3.3.1" class="anchored" data-anchor-id="visualising-the-outlines-of-study-area"><span class="header-section-number">3.3.1</span> Visualising the outline(s) of study area</h4>
<p>Suppose you want to visual just the outline of London’s LSOA only:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visual outline of London’s LSOA postcodes only</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Spatial_data) <span class="sc">+</span> <span class="fu">tm_polygons</span>()</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Insert the “Spatial_data” object into the command line of </span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># tm_shape(). No customisation has been applied here.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/image6_outline.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>You can customise the level of transparency for both the area and borders by adding some arguments in the <code>tm_polygon()</code> [i.e., <code>fill_alpha</code>, and <code>col_alpha</code> which only take values between 0 (full transparency) to 1 (100% solid)]. For example:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Controlling transparencies for borders and areas</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Spatial_data) <span class="sc">+</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="at">fill_alpha =</span> <span class="fl">0.1</span>, <span class="at">col_alpha =</span> <span class="fl">0.4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/image7_transparency.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="adding-another-layer-on-top-of-study-area" class="level4" data-number="3.3.2">
<h4 data-number="3.3.2" class="anchored" data-anchor-id="adding-another-layer-on-top-of-study-area"><span class="header-section-number">3.3.2</span> Adding another layer on top of study area</h4>
<p>Suppose you want to add another layer to show the regions (i.e., Borough) of London for which the LSOA areas reside in, you can use another <code>tm_shape()</code> in the code, the coding would be as follows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding another layer</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Spatial_data) <span class="sc">+</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="at">fill_alpha =</span> <span class="fl">0.1</span>, <span class="at">col_alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(london_borough_shapefile) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="at">fill_alpha =</span> <span class="dv">0</span>, <span class="at">col_alpha =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"black"</span>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># The background of the added layer (london_borough_shapefile) has been rendered </span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co"># to full transparency with the fill_alpha set to 0 and it borders are fully solid </span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># using col_alpha set to 1 and col (colour) set to “black” to appear pronounced.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/image8_addedlayer.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="full-visualising-of-data-in-the-maps" class="level4" data-number="3.3.3">
<h4 data-number="3.3.3" class="anchored" data-anchor-id="full-visualising-of-data-in-the-maps"><span class="header-section-number">3.3.3</span> Full visualising of data in the maps</h4>
<p>Suppose you want to visual the spatial data in those postcodes, we can use the <code>tm_polygons()</code> function. Let us visual the <code>IMD_Decile</code> column which has <strong>DISCRETE</strong> (or CATEGORICAL) values classed from 1 to 10 to signify areas that are deprived (with 1 being the poorest) and those that are wealthier (with 10 being the least deprived).</p>
<p>The coding would be as follows:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate map IMD_Deciles</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Spatial_data) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">"IMD_Decile"</span>, </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill.scale =</span> <span class="fu">tm_scale_categorical</span>(<span class="at">values =</span> <span class="st">"brewer.rd_yl_gn"</span>),</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill.legend =</span> <span class="fu">tm_legend</span>(<span class="at">title =</span> <span class="st">"Deprivation (Deciles)"</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">item.space =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">position =</span> <span class="fu">tm_pos_out</span>()),</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill_alpha =</span> <span class="dv">1</span>, </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">col_alpha =</span> <span class="fl">0.5</span>, </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">"black"</span>, </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">lwd =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_shape</span>(london_borough_shapefile) <span class="sc">+</span> </span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="at">fill_alpha =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"arrow"</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span> </span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scalebar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>In the <code>tm_polygons()</code>, we insert the variable of interest we want to visual at the <code>fill =</code> argument. The <code>fill.scale =</code> option allows us to select the appropriate fill scale colour scheme depending on the type of dataset we are using - here it is categorical, so we use <code>tm_scale_categorical()</code>. The <code>fill_legend()</code> allows us to apply the appropriate customisation to the legends.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Geography 101</strong> – when creating a map, it is always best to add the North compass and scale bar. This is done with the <code>tm_compass()</code> and <code>tm_scalebar()</code> functions. The <code>tm_layout()</code> allows you to make further customisations to the internal and external plot region of map such as turning of the plot frame or modifying the text size in output. You can experiment with them by checking the help menu – just type: <code>?tm_layout()</code> in the console.</p>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/Image9_finalmap.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>This concludes this computer lab session. Challenge yourself with the task placed in <strong>section 1.6</strong></p>
</section>
</section>
</section>
<section id="references" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="references"><span class="header-section-number">4</span> References</h2>
<section id="recommended-reading-see-reading-list" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="recommended-reading-see-reading-list"><span class="header-section-number">4.1</span> Recommended reading (see reading list)</h3>
<ol type="1">
<li><strong>Book</strong>: [Theory] Longley, P. <em>et al</em> (2015) Geographic Information Science &amp; Systems (4th Edition); <strong>Chapters 2: The Nature of Geographic Data</strong> <a href="https://rl.talis.com/3/ucl/items/61CF5A5F-A6A3-9506-1F94-DF3CBD81CC3A.html"><strong>Click link</strong></a> (Note: use of your UCL login via institutional organisation (<strong>UK Federation</strong>) is required to access the digital book)</li>
<li><strong>Book</strong>: [Theory] Longley, P. <em>et al</em> (2015) Geographic Information Science &amp; Systems (4th Edition); <strong>Chapters 3: Representing Geography</strong> <a href="https://rl.talis.com/3/ucl/items/61CF5A5F-A6A3-9506-1F94-DF3CBD81CC3A.html"><strong>Click link</strong></a> (Note: use of your UCL login via institutional organisation (<strong>UK Federation</strong>) is required to access the digital book)</li>
<li><strong>Book</strong>: [R Programming] Brunsdon, C. <em>et al</em> (2018) An Introduction to R for Spatial Analysis and Mapping; <strong>Chapter 3: Basics of Handling Spatial Data in R</strong> <a href="https://ucl.primo.exlibrisgroup.com/discovery/search?query=any,contains,An%20Introduction%20to%20R%20for%20Spatial%20Analysis%20and%20Mapping&amp;tab=Everything&amp;search_scope=MyInst_and_CI&amp;sortby=date_d&amp;vid=44UCL_INST:UCL_VU2&amp;facet=frbrgroupid,include,9076326046905167101&amp;offset=0"><strong>Click link</strong></a> (Note: Books can be borrowed from UCL’s Library)</li>
<li><strong>Book</strong>: [R Programming] Dorman, M. (2014) Learning R for Geospatial Analysis; <strong>Chapter 1: The R Environment</strong> <a href="https://learning.oreilly.com/library/view/learning-r-for/9781783984367/ch01.html"><strong>Click link</strong></a> (Note: Digital book)</li>
<li><strong>Book</strong>: [R Programming] Dorman, M. (2014) Learning R for Geospatial Analysis; <strong>Chapter 3: Working with tables</strong> <a href="https://learning.oreilly.com/library/view/learning-r-for/9781783984367/ch03.html"><strong>Click link</strong></a> (Note: Digital book)</li>
<li><strong>Paper</strong>: [R Programming] Tennekes, M. (2018). <strong>tmap: Thematic Maps in R</strong>. Journal of Statistical Software, 84(6), 1–39. https://doi.org/10.18637/jss.v084.i06 (<a href="https://www.jstatsoft.org/index.php/jss/article/view/v084i06/1210"><strong>Download</strong></a>)</li>
</ol>
</section>
</section>
<section id="data-sources" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="data-sources"><span class="header-section-number">5</span> Data Sources</h2>
<ol type="1">
<li>UK Fire statistics incident level dataset (see: “Low-level geography dataset”)[Source: <strong>UK Gov</strong>] <a href="https://www.gov.uk/government/statistics/fire-statistics-incident-level-datasets"><strong>Click Here</strong></a></li>
<li>English indices for Multiple Deprivation (IMD) for 2019 [Source: <strong>UK Gov</strong>] <a href="https://www.gov.uk/government/statistics/english-indices-of-deprivation-2019"><strong>Click Here</strong></a></li>
<li>UK Shape files for different geographic units [Source: <strong>Office for National Statistics, Open Geography Portal</strong>] <a href="https://geoportal.statistics.gov.uk"><strong>Click Here</strong></a></li>
</ol>
</section>
<section id="exercise" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="exercise"><span class="header-section-number">6</span> Exercise</h2>
<p><strong>Exploring the burden of fire hazards and vulnerability in London</strong></p>
<p>An incidence rate (IR) is typically a measure of frequency used to quantify the occurrence of an event.</p>
<p>This basic quantitative measure is often applied in social sciences (e.g., criminology for crime rates, in education on pass rates for grades), epidemiology and disaster sciences as well. The study of fire hazards and safety is an intersection of these three fields.</p>
<p><strong>Objectives</strong>: Use the spatial data you have built throughout the exercise to visualise the distribution of incidence of fires that occurred in residential premises across postcodes in London in 2019.</p>
<p><strong>HINTS</strong>:</p>
<ul>
<li>The incidence rate (<strong>I</strong>) formula for calculating fires hazards across LSOAs in London is the reported number of residential premises in an LSOA that experienced a fire event (<strong>E</strong>) divided by the total number of residential premises in an LOSA (<strong>T</strong>). This is shown below expressed per 1,000 residence (per capita). The reported number of residential premises is the column <code>Fires2019</code>. The total number of houses in an LSOA is the column <code>TotalHouses2019</code> The incidence rate formula is:</li>
</ul>
<br>
<center>
<span class="math inline">\(I  = (E/T) × 1000\)</span>
</center>
<p><br></p>
<ul>
<li>Experiment with the <code>tmap</code> functions and arguments to create a map showing the incidence rate of fire hazards across LSOAs in London. The output should look something as follows:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/general/week1/Image10_solutionmap.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Use the <code>tm_shape()</code> functions to add the spatial data frame object with the incidence rates.</li>
<li>In the arguments for the <code>tm_polygons()</code> function, inside it, it should include the following codes: 1.) use the argument <code>fill=</code> to specify the name of the column to be mapped; 2.) use the argument <code>fill.scale = tm_scale_continuous()</code> to control how the scale in the legends should appear. It should be continuous as the incidence rates are continuous values. Therefore, within the <code>tm_scale_continuous()</code> argument, use the options <code>values =</code> to control the colour gradient from blue (i.e., low intensity of fire hazards) to red (i.e., high burden) by typing the colour scheme: “-brewer.rd_bu”; 3.) use the argument <code>fill.legend = tm_legend()</code> to control the appearence of the legend block. Inside the <code>tm_legend()</code> specific <code>title =</code> as “Fires per 1,000”, and remove the plot frame around the legend block by stating <code>frame = FALSE</code>; 4.) apply the further cosmetics changes using <code>"fill_alpha = 1"</code> (transparency of areas), <code>col_alpha = 0.5</code> (transparency of lines), <code>col = "grey"</code> (color of the line) and <code>lwd = 0.1</code> (line thickness).</li>
<li>Include the following customizations: 1.) a scale bar and a north arrow in the visualisation using the <code>tm_scale_bar()</code> and <code>tm_compass()</code>; and 2.) lastly, use the overlay of the London Borough shapefile add it on top of the London LSOA shapefile by using again, the <code>tm_shape()</code> function, and render it fully transparent. Try using the <code>tm_text()</code> function to include the names of the Boroughs in the visualisation - this column is called <code>ctyua16nm</code> in the Borough’s shapefile.</li>
</ul>
<p><strong>Question:</strong> How would you provide a descriptive interpretation of the spatial distribution/incidence of residential fires across LSOAs in London?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Have a go at these questions before revealing the solution codes and output below</p>
</div>
</div>
<details>
<summary>
<strong>Click here to see solution code:</strong>
</summary>
<p>Load the required packages:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tmap"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"sf"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Load in the required dataset i.e., <code>London_LSOA_FireHazards_2019.csv</code> using the <code>read.csv()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># please be sure set the work directory according to your own PC</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># setwd("/Users/anwarmusah/Documents/Websites/GEOG0114/all_datasets/Week 1 - Dataset")</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>Fire_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file=</span><span class="st">"London_LSOA_FireHazards_2019.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Load in the required shapefile dataset i.e., <code>London_LSOA_areas.shp</code> and <code>London_Boroughs_Shapefile.shp</code> using the <code>read_sf()</code> function:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add shapefiles for LSOA and Boroughs</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>london_lsoa_shapefile <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"London_LSOA_areas.shp"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>london_borough_shapefile <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"London_Boroughs_Shapefile.shp"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Merge the fire records to LSOA shapefile using the <code>merge()</code> on common key column (e.g., <code>LSOA_code</code>):</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Spatial_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(london_lsoa_shapefile, Fire_data, <span class="at">by.x =</span> <span class="st">'LSOA_code'</span>, <span class="at">by.y =</span> <span class="st">'LSOA_code'</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Calculate the incidence of fires in London’s LSOA:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the incidence rate. </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This requires creating a new variable in the `Spatial_data` data frame.</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let call the new variable 'IncidenceFires'. </span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># We are creating the 'IncidenceFires' column based on 'Fires2019' and 'TotalHouses2019'</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Its a rate per capita so we will divide the two and multiple it by 1000</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>Spatial_data<span class="sc">$</span>IncidenceFires <span class="ot">&lt;-</span> (Spatial_data<span class="sc">$</span>Fires2019<span class="sc">/</span>Spatial_data<span class="sc">$</span>TotalHouses2019)<span class="sc">*</span><span class="dv">1000</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Let’s create the map that shows the burden of fires. Here, we will use a continuous scale for the colour gradient in the legend block:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a incidence map 'with continuous scale' according to the criteria specified in the hints</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Spatial_data) <span class="sc">+</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="st">"IncidenceFires"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill.scale =</span> <span class="fu">tm_scale_continuous</span>(<span class="at">values =</span> <span class="st">"-brewer.rd_bu"</span>, <span class="at">midpoint =</span> <span class="fl">1.5</span>),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill.legend =</span> <span class="fu">tm_legend</span>(<span class="at">title =</span> <span class="st">"Fires per 1,000"</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill_alpha =</span> <span class="dv">1</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">col_alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">"white"</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">lwd =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_shape</span>(london_borough_shapefile) <span class="sc">+</span> </span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="at">fill_alpha =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_text</span>(<span class="st">"ctyua16nm"</span>, <span class="at">size =</span> <span class="st">"AREA"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"arrow"</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span> </span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scalebar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03-spatial_analysis_for_data_science_files/figure-html/map1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Interpretation:</strong> From this static map, it is difficult to discern the spatial patterns in incidence of fire hazards in residential dwellings in LSOAs in London. For instance, Boroughs such as <strong>Hackney</strong> appears to have a <strong>dispersed</strong> pattern with some LSOAs reporting high incidence rates. The borough of <strong>Bexley</strong> has high incidence rates concentrated in the North-East.</p>
</div>
</div>
<p>You can make this an interactive map by using the <code>tmap_mode("view")</code> code. Let us print this output in an interactive map, so we can zoom into the details and have a clearer picture:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to map interactive using tmap_mode("view") code, and re-run the map code again</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># active interactive mode</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"view"</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># re-run the map code again to show it in an interactive mode</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(Spatial_data) <span class="sc">+</span> </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="st">"IncidenceFires"</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill.scale =</span> <span class="fu">tm_scale_continuous</span>(<span class="at">values =</span> <span class="st">"-brewer.rd_bu"</span>, <span class="at">midpoint =</span> <span class="fl">1.5</span>),</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill.legend =</span> <span class="fu">tm_legend</span>(<span class="at">title =</span> <span class="st">"Fires per 1,000"</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>),</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill_alpha =</span> <span class="dv">1</span>,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">col_alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="st">"white"</span>,</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">lwd =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_shape</span>(london_borough_shapefile) <span class="sc">+</span> </span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="at">fill_alpha =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_text</span>(<span class="st">"ctyua16nm"</span>, <span class="at">size =</span> <span class="st">"AREA"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">"arrow"</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">"right"</span>, <span class="st">"top"</span>)) <span class="sc">+</span> </span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_scalebar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">"left"</span>, <span class="st">"bottom"</span>))</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a><span class="co"># switch off the interactive mode</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>By running the code: <code>tmap_mode("view")</code>, will cause all map outputs to be generated in interactivity mode. You can switch it off by running the following code: <code>tmap_mode("plot")</code></p>
</div>
</div>
</details>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-installation.html" class="pagination-link" aria-label="Installation of R and RStudio">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Installation of R and RStudio</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-graphical_representation.html" class="pagination-link" aria-label="Week 2: Graphical representation of spatial data">
        <span class="nav-page-text">Week 2: Graphical representation of spatial data</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/UCLPG-MSC-SGDS/GEOG0114/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer><script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>